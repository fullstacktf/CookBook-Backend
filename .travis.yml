language: node_js
node_js:
- stable
branches:
  only:
  - dev
jobs:
  include:
  - stage: test
    script: npm test
  - stage: creating public dir
    script:
      - npm i 
      - npm run ts
      - ls -la

env:
  global:
  - REMOTE_PATH=project/CookBook-Backend
  - REMOTE_USER=travisci
  - REMOTE_HOST=165.22.77.10
  - REMOTE_PORT=22
before_install:
  - bash scripts/install.sh
after_success:
  - bash scripts/deploy.sh